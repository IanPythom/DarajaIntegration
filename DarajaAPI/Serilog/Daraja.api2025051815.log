[2025-05-18 15:05:51.698 +03:00] [INF] [] [] [] [Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `m`.`Id`, `m`.`BillRefNumber`, `m`.`BusinessShortCode`, `m`.`CreatedAt`, `m`.`FirstName`, `m`.`InvoiceNumber`, `m`.`IsVerified`, `m`.`LastName`, `m`.`MSISDN`, `m`.`MiddleName`, `m`.`OrgAccountBalance`, `m`.`RetryCount`, `m`.`ThirdPartyTransID`, `m`.`TransAmount`, `m`.`TransID`, `m`.`TransTime`, `m`.`TransactionType`, `m`.`VerificationDate`, `m`.`VerificationResult`
FROM `MpesaC2Bs` AS `m`
WHERE NOT (`m`.`IsVerified`) AND (`m`.`CreatedAt` > DATE_ADD(UTC_TIMESTAMP(), INTERVAL CAST(-7.0 AS signed) day))] []
[2025-05-18 15:08:28.872 +03:00] [INF] [] [0HNCLU5SMUD3I:00000001] [/swagger/index.html] [Request starting HTTP/1.1 GET https://a86e-41-81-46-57.ngrok-free.app/swagger/index.html - null null] []
[2025-05-18 15:08:28.891 +03:00] [INF] [] [0HNCLU5SMUD3I:00000001] [/swagger/index.html] [Request finished HTTP/1.1 GET https://a86e-41-81-46-57.ngrok-free.app/swagger/index.html - 200 null text/html;charset=utf-8 23.7989ms] []
[2025-05-18 15:08:29.610 +03:00] [INF] [] [0HNCLU5SMUD3I:00000002] [/_framework/aspnetcore-browser-refresh.js] [Request starting HTTP/1.1 GET https://a86e-41-81-46-57.ngrok-free.app/_framework/aspnetcore-browser-refresh.js - null null] []
[2025-05-18 15:08:29.623 +03:00] [INF] [] [0HNCLU5SMUD3I:00000002] [/_framework/aspnetcore-browser-refresh.js] [Request finished HTTP/1.1 GET https://a86e-41-81-46-57.ngrok-free.app/_framework/aspnetcore-browser-refresh.js - 200 16503 application/javascript; charset=utf-8 13.6917ms] []
[2025-05-18 15:08:29.624 +03:00] [INF] [] [0HNCLU5SMUD3J:00000001] [/_vs/browserLink] [Request starting HTTP/1.1 GET https://a86e-41-81-46-57.ngrok-free.app/_vs/browserLink - null null] []
[2025-05-18 15:08:29.638 +03:00] [INF] [] [0HNCLU5SMUD3J:00000001] [/_vs/browserLink] [Request finished HTTP/1.1 GET https://a86e-41-81-46-57.ngrok-free.app/_vs/browserLink - 200 null text/javascript; charset=UTF-8 13.7957ms] []
[2025-05-18 15:08:33.474 +03:00] [INF] [] [0HNCLU5SMUD3J:00000002] [/swagger/v1/swagger.json] [Request starting HTTP/1.1 GET https://a86e-41-81-46-57.ngrok-free.app/swagger/v1/swagger.json - null null] []
[2025-05-18 15:08:33.489 +03:00] [INF] [] [0HNCLU5SMUD3J:00000002] [/swagger/v1/swagger.json] [Request finished HTTP/1.1 GET https://a86e-41-81-46-57.ngrok-free.app/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 15.0962ms] []
[2025-05-18 15:11:25.472 +03:00] [INF] [] [0HNCLU5SMUD3K:00000001] [/api/v1/mpesa/registration/urls] [Request starting HTTP/1.1 POST https://a86e-41-81-46-57.ngrok-free.app/api/v1/mpesa/registration/urls - null 0] []
[2025-05-18 15:11:25.477 +03:00] [INF] [] [0HNCLU5SMUD3K:00000001] [/api/v1/mpesa/registration/urls] [CORS policy execution successful.] []
[2025-05-18 15:11:25.485 +03:00] [INF] [] [0HNCLU5SMUD3K:00000001] [/api/v1/mpesa/registration/urls] [Executing endpoint 'DarajaAPI.Controllers.v1.MpesaRegistrationController.RegisterUrls (DarajaAPI)'] []
[2025-05-18 15:11:25.494 +03:00] [INF] [] [0HNCLU5SMUD3K:00000001] [/api/v1/mpesa/registration/urls] [Route matched with {action = "RegisterUrls", controller = "MpesaRegistration"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterUrls() on controller DarajaAPI.Controllers.v1.MpesaRegistrationController (DarajaAPI).] []
[2025-05-18 15:11:25.500 +03:00] [INF] [] [0HNCLU5SMUD3K:00000001] [/api/v1/mpesa/registration/urls] [Start processing HTTP request GET https://sandbox.safaricom.co.ke/oauth/v1/generate?grant_type=client_credentials] []
[2025-05-18 15:11:25.502 +03:00] [INF] [] [0HNCLU5SMUD3K:00000001] [/api/v1/mpesa/registration/urls] [Sending HTTP request GET https://sandbox.safaricom.co.ke/oauth/v1/generate?grant_type=client_credentials] []
[2025-05-18 15:11:26.392 +03:00] [INF] [] [0HNCLU5SMUD3K:00000001] [/api/v1/mpesa/registration/urls] [Received HTTP response headers after 889.4377ms - 200] []
[2025-05-18 15:11:26.395 +03:00] [INF] [] [0HNCLU5SMUD3K:00000001] [/api/v1/mpesa/registration/urls] [End processing HTTP request after 895.7806ms - 200] []
[2025-05-18 15:11:26.400 +03:00] [INF] [] [0HNCLU5SMUD3K:00000001] [/api/v1/mpesa/registration/urls] [Start processing HTTP request POST https://sandbox.safaricom.co.ke/] []
[2025-05-18 15:11:26.401 +03:00] [INF] [] [0HNCLU5SMUD3K:00000001] [/api/v1/mpesa/registration/urls] [Sending HTTP request POST https://sandbox.safaricom.co.ke/] []
[2025-05-18 15:11:26.628 +03:00] [INF] [] [0HNCLU5SMUD3K:00000001] [/api/v1/mpesa/registration/urls] [Received HTTP response headers after 225.8198ms - 404] []
[2025-05-18 15:11:26.632 +03:00] [INF] [] [0HNCLU5SMUD3K:00000001] [/api/v1/mpesa/registration/urls] [End processing HTTP request after 232.0256ms - 404] []
[2025-05-18 15:11:26.635 +03:00] [ERR] [] [0HNCLU5SMUD3K:00000001] [/api/v1/mpesa/registration/urls] [URL registration failed: ] []
[2025-05-18 15:11:26.636 +03:00] [INF] [] [0HNCLU5SMUD3K:00000001] [/api/v1/mpesa/registration/urls] [Executing OkObjectResult, writing value of type 'System.String'.] []
[2025-05-18 15:11:26.638 +03:00] [INF] [] [0HNCLU5SMUD3K:00000001] [/api/v1/mpesa/registration/urls] [Executed action DarajaAPI.Controllers.v1.MpesaRegistrationController.RegisterUrls (DarajaAPI) in 1139.4632ms] []
[2025-05-18 15:11:26.640 +03:00] [INF] [] [0HNCLU5SMUD3K:00000001] [/api/v1/mpesa/registration/urls] [Executed endpoint 'DarajaAPI.Controllers.v1.MpesaRegistrationController.RegisterUrls (DarajaAPI)'] []
[2025-05-18 15:11:26.641 +03:00] [INF] [] [0HNCLU5SMUD3K:00000001] [/api/v1/mpesa/registration/urls] [Request finished HTTP/1.1 POST https://a86e-41-81-46-57.ngrok-free.app/api/v1/mpesa/registration/urls - 200 0 text/plain; charset=utf-8 1168.9944ms] []
[2025-05-18 15:15:20.333 +03:00] [INF] [] [0HNCLU5SMUD3L:00000001] [/api/v1/mpesa/payments/initiate] [Request starting HTTP/1.1 POST https://a86e-41-81-46-57.ngrok-free.app/api/v1/mpesa/payments/initiate - application/json 83] []
[2025-05-18 15:15:20.340 +03:00] [INF] [] [0HNCLU5SMUD3L:00000001] [/api/v1/mpesa/payments/initiate] [CORS policy execution successful.] []
[2025-05-18 15:15:20.342 +03:00] [INF] [] [0HNCLU5SMUD3L:00000001] [/api/v1/mpesa/payments/initiate] [Executing endpoint 'DarajaAPI.Controllers.v1.MpesaPaymentController.InitiatePayment (DarajaAPI)'] []
[2025-05-18 15:15:20.346 +03:00] [INF] [] [0HNCLU5SMUD3L:00000001] [/api/v1/mpesa/payments/initiate] [Route matched with {action = "InitiatePayment", controller = "MpesaPayment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] InitiatePayment(DarajaAPI.Models.Dto.PaymentRequestDto) on controller DarajaAPI.Controllers.v1.MpesaPaymentController (DarajaAPI).] []
[2025-05-18 15:15:53.470 +03:00] [INF] [] [0HNCLU5SMUD3L:00000001] [/api/v1/mpesa/payments/initiate] [Start processing HTTP request GET https://sandbox.safaricom.co.ke/oauth/v1/generate?grant_type=client_credentials] []
[2025-05-18 15:15:53.474 +03:00] [INF] [] [0HNCLU5SMUD3L:00000001] [/api/v1/mpesa/payments/initiate] [Sending HTTP request GET https://sandbox.safaricom.co.ke/oauth/v1/generate?grant_type=client_credentials] []
[2025-05-18 15:15:54.562 +03:00] [INF] [] [0HNCLU5SMUD3L:00000001] [/api/v1/mpesa/payments/initiate] [Received HTTP response headers after 1086.2247ms - 200] []
[2025-05-18 15:15:54.565 +03:00] [INF] [] [0HNCLU5SMUD3L:00000001] [/api/v1/mpesa/payments/initiate] [End processing HTTP request after 1095.2794ms - 200] []
[2025-05-18 15:16:54.330 +03:00] [INF] [] [0HNCLU5SMUD3L:00000001] [/api/v1/mpesa/payments/initiate] [Start processing HTTP request POST https://sandbox.safaricom.co.ke/mpesa/stkpush/v1/processrequest] []
[2025-05-18 15:16:54.334 +03:00] [INF] [] [0HNCLU5SMUD3L:00000001] [/api/v1/mpesa/payments/initiate] [Sending HTTP request POST https://sandbox.safaricom.co.ke/mpesa/stkpush/v1/processrequest] []
[2025-05-18 15:16:54.812 +03:00] [INF] [] [0HNCLU5SMUD3L:00000001] [/api/v1/mpesa/payments/initiate] [Received HTTP response headers after 476.5705ms - 400] []
[2025-05-18 15:16:54.815 +03:00] [INF] [] [0HNCLU5SMUD3L:00000001] [/api/v1/mpesa/payments/initiate] [End processing HTTP request after 484.8131ms - 400] []
[2025-05-18 15:16:55.407 +03:00] [INF] [] [0HNCLU5SMUD3L:00000001] [/api/v1/mpesa/payments/initiate] [Payment processed: 254708374149, 10] []
[2025-05-18 15:16:56.912 +03:00] [INF] [] [0HNCLU5SMUD3L:00000001] [/api/v1/mpesa/payments/initiate] [Executing OkObjectResult, writing value of type 'System.String'.] []
[2025-05-18 15:16:56.915 +03:00] [INF] [] [0HNCLU5SMUD3L:00000001] [/api/v1/mpesa/payments/initiate] [Executed action DarajaAPI.Controllers.v1.MpesaPaymentController.InitiatePayment (DarajaAPI) in 96565.6629ms] []
[2025-05-18 15:16:56.918 +03:00] [INF] [] [0HNCLU5SMUD3L:00000001] [/api/v1/mpesa/payments/initiate] [Executed endpoint 'DarajaAPI.Controllers.v1.MpesaPaymentController.InitiatePayment (DarajaAPI)'] []
[2025-05-18 15:16:56.923 +03:00] [INF] [] [0HNCLU5SMUD3L:00000001] [/api/v1/mpesa/payments/initiate] [Request finished HTTP/1.1 POST https://a86e-41-81-46-57.ngrok-free.app/api/v1/mpesa/payments/initiate - 200 null text/plain; charset=utf-8 96589.9449ms] []
[2025-05-18 15:18:14.357 +03:00] [INF] [] [0HNCLU5SMUD3L:00000002] [/api/v1/mpesa/payments/initiate] [Request starting HTTP/1.1 POST https://a86e-41-81-46-57.ngrok-free.app/api/v1/mpesa/payments/initiate - application/json 83] []
[2025-05-18 15:18:14.374 +03:00] [INF] [] [0HNCLU5SMUD3L:00000002] [/api/v1/mpesa/payments/initiate] [CORS policy execution successful.] []
[2025-05-18 15:18:14.380 +03:00] [INF] [] [0HNCLU5SMUD3L:00000002] [/api/v1/mpesa/payments/initiate] [Executing endpoint 'DarajaAPI.Controllers.v1.MpesaPaymentController.InitiatePayment (DarajaAPI)'] []
[2025-05-18 15:18:14.386 +03:00] [INF] [] [0HNCLU5SMUD3L:00000002] [/api/v1/mpesa/payments/initiate] [Route matched with {action = "InitiatePayment", controller = "MpesaPayment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] InitiatePayment(DarajaAPI.Models.Dto.PaymentRequestDto) on controller DarajaAPI.Controllers.v1.MpesaPaymentController (DarajaAPI).] []
[2025-05-18 15:18:20.555 +03:00] [INF] [] [0HNCLU5SMUD3L:00000002] [/api/v1/mpesa/payments/initiate] [Start processing HTTP request GET https://sandbox.safaricom.co.ke/oauth/v1/generate?grant_type=client_credentials] []
[2025-05-18 15:18:20.560 +03:00] [INF] [] [0HNCLU5SMUD3L:00000002] [/api/v1/mpesa/payments/initiate] [Sending HTTP request GET https://sandbox.safaricom.co.ke/oauth/v1/generate?grant_type=client_credentials] []
[2025-05-18 15:18:21.399 +03:00] [INF] [] [0HNCLU5SMUD3L:00000002] [/api/v1/mpesa/payments/initiate] [Received HTTP response headers after 836.8655ms - 200] []
[2025-05-18 15:18:21.410 +03:00] [INF] [] [0HNCLU5SMUD3L:00000002] [/api/v1/mpesa/payments/initiate] [End processing HTTP request after 854.6315ms - 200] []
[2025-05-18 15:21:08.222 +03:00] [INF] [] [0HNCLU5SMUD3L:00000002] [/api/v1/mpesa/payments/initiate] [Start processing HTTP request POST https://sandbox.safaricom.co.ke/mpesa/stkpush/v1/processrequest] []
[2025-05-18 15:21:08.238 +03:00] [INF] [] [0HNCLU5SMUD3L:00000002] [/api/v1/mpesa/payments/initiate] [Sending HTTP request POST https://sandbox.safaricom.co.ke/mpesa/stkpush/v1/processrequest] []
[2025-05-18 15:21:08.308 +03:00] [INF] [] [] [] [Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `m`.`Id`, `m`.`BillRefNumber`, `m`.`BusinessShortCode`, `m`.`CreatedAt`, `m`.`FirstName`, `m`.`InvoiceNumber`, `m`.`IsVerified`, `m`.`LastName`, `m`.`MSISDN`, `m`.`MiddleName`, `m`.`OrgAccountBalance`, `m`.`RetryCount`, `m`.`ThirdPartyTransID`, `m`.`TransAmount`, `m`.`TransID`, `m`.`TransTime`, `m`.`TransactionType`, `m`.`VerificationDate`, `m`.`VerificationResult`
FROM `MpesaC2Bs` AS `m`
WHERE NOT (`m`.`IsVerified`) AND (`m`.`CreatedAt` > DATE_ADD(UTC_TIMESTAMP(), INTERVAL CAST(-7.0 AS signed) day))] []
[2025-05-18 15:21:09.184 +03:00] [INF] [] [0HNCLU5SMUD3L:00000002] [/api/v1/mpesa/payments/initiate] [Received HTTP response headers after 939.7221ms - 400] []
[2025-05-18 15:21:09.197 +03:00] [INF] [] [0HNCLU5SMUD3L:00000002] [/api/v1/mpesa/payments/initiate] [End processing HTTP request after 975.4466ms - 400] []
[2025-05-18 15:21:10.186 +03:00] [INF] [] [0HNCLU5SMUD3L:00000002] [/api/v1/mpesa/payments/initiate] [Payment processed: 254708374149, 10] []
[2025-05-18 15:21:15.093 +03:00] [INF] [] [0HNCLU5SMUD3L:00000002] [/api/v1/mpesa/payments/initiate] [Executing OkObjectResult, writing value of type 'System.String'.] []
[2025-05-18 15:21:15.096 +03:00] [INF] [] [0HNCLU5SMUD3L:00000002] [/api/v1/mpesa/payments/initiate] [Executed action DarajaAPI.Controllers.v1.MpesaPaymentController.InitiatePayment (DarajaAPI) in 180706.9523ms] []
[2025-05-18 15:21:15.098 +03:00] [INF] [] [0HNCLU5SMUD3L:00000002] [/api/v1/mpesa/payments/initiate] [Executed endpoint 'DarajaAPI.Controllers.v1.MpesaPaymentController.InitiatePayment (DarajaAPI)'] []
[2025-05-18 15:21:15.099 +03:00] [INF] [] [0HNCLU5SMUD3L:00000002] [/api/v1/mpesa/payments/initiate] [Request finished HTTP/1.1 POST https://a86e-41-81-46-57.ngrok-free.app/api/v1/mpesa/payments/initiate - 200 null text/plain; charset=utf-8 180741.9057ms] []
[2025-05-18 15:21:33.623 +03:00] [INF] [] [0HNCLU5SMUD3M:00000001] [/api/v1/mpesa/payments/initiate] [Request starting HTTP/1.1 POST https://a86e-41-81-46-57.ngrok-free.app/api/v1/mpesa/payments/initiate - application/json 83] []
[2025-05-18 15:21:33.628 +03:00] [INF] [] [0HNCLU5SMUD3M:00000001] [/api/v1/mpesa/payments/initiate] [CORS policy execution successful.] []
[2025-05-18 15:21:33.630 +03:00] [INF] [] [0HNCLU5SMUD3M:00000001] [/api/v1/mpesa/payments/initiate] [Executing endpoint 'DarajaAPI.Controllers.v1.MpesaPaymentController.InitiatePayment (DarajaAPI)'] []
[2025-05-18 15:21:33.631 +03:00] [INF] [] [0HNCLU5SMUD3M:00000001] [/api/v1/mpesa/payments/initiate] [Route matched with {action = "InitiatePayment", controller = "MpesaPayment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] InitiatePayment(DarajaAPI.Models.Dto.PaymentRequestDto) on controller DarajaAPI.Controllers.v1.MpesaPaymentController (DarajaAPI).] []
[2025-05-18 15:21:42.656 +03:00] [INF] [] [0HNCLU5SMUD3M:00000001] [/api/v1/mpesa/payments/initiate] [Start processing HTTP request GET https://sandbox.safaricom.co.ke/oauth/v1/generate?grant_type=client_credentials] []
[2025-05-18 15:21:42.660 +03:00] [INF] [] [0HNCLU5SMUD3M:00000001] [/api/v1/mpesa/payments/initiate] [Sending HTTP request GET https://sandbox.safaricom.co.ke/oauth/v1/generate?grant_type=client_credentials] []
[2025-05-18 15:21:43.504 +03:00] [INF] [] [0HNCLU5SMUD3M:00000001] [/api/v1/mpesa/payments/initiate] [Received HTTP response headers after 842.1237ms - 200] []
[2025-05-18 15:21:43.515 +03:00] [INF] [] [0HNCLU5SMUD3M:00000001] [/api/v1/mpesa/payments/initiate] [End processing HTTP request after 858.8294ms - 200] []
[2025-05-18 15:21:47.451 +03:00] [INF] [] [0HNCLU5SMUD3M:00000001] [/api/v1/mpesa/payments/initiate] [Start processing HTTP request POST https://sandbox.safaricom.co.ke/mpesa/stkpush/v1/processrequest] []
[2025-05-18 15:21:47.455 +03:00] [INF] [] [0HNCLU5SMUD3M:00000001] [/api/v1/mpesa/payments/initiate] [Sending HTTP request POST https://sandbox.safaricom.co.ke/mpesa/stkpush/v1/processrequest] []
[2025-05-18 15:21:47.748 +03:00] [INF] [] [0HNCLU5SMUD3M:00000001] [/api/v1/mpesa/payments/initiate] [Received HTTP response headers after 288.8349ms - 400] []
[2025-05-18 15:21:47.752 +03:00] [INF] [] [0HNCLU5SMUD3M:00000001] [/api/v1/mpesa/payments/initiate] [End processing HTTP request after 301.628ms - 400] []
[2025-05-18 15:21:48.121 +03:00] [INF] [] [0HNCLU5SMUD3M:00000001] [/api/v1/mpesa/payments/initiate] [Payment processed: 254708374149, 10] []
[2025-05-18 15:22:19.597 +03:00] [INF] [] [0HNCLU5SMUD3M:00000001] [/api/v1/mpesa/payments/initiate] [Executing OkObjectResult, writing value of type 'System.String'.] []
[2025-05-18 15:22:19.620 +03:00] [INF] [] [0HNCLU5SMUD3M:00000001] [/api/v1/mpesa/payments/initiate] [Executed action DarajaAPI.Controllers.v1.MpesaPaymentController.InitiatePayment (DarajaAPI) in 45984.3065ms] []
[2025-05-18 15:22:19.624 +03:00] [INF] [] [0HNCLU5SMUD3M:00000001] [/api/v1/mpesa/payments/initiate] [Executed endpoint 'DarajaAPI.Controllers.v1.MpesaPaymentController.InitiatePayment (DarajaAPI)'] []
[2025-05-18 15:22:19.626 +03:00] [INF] [] [0HNCLU5SMUD3M:00000001] [/api/v1/mpesa/payments/initiate] [Request finished HTTP/1.1 POST https://a86e-41-81-46-57.ngrok-free.app/api/v1/mpesa/payments/initiate - 200 null text/plain; charset=utf-8 46003.03ms] []
[2025-05-18 15:22:23.875 +03:00] [INF] [] [0HNCLU5SMUD3M:00000002] [/api/v1/mpesa/payments/initiate] [Request starting HTTP/1.1 POST https://a86e-41-81-46-57.ngrok-free.app/api/v1/mpesa/payments/initiate - application/json 83] []
[2025-05-18 15:22:23.880 +03:00] [INF] [] [0HNCLU5SMUD3M:00000002] [/api/v1/mpesa/payments/initiate] [CORS policy execution successful.] []
[2025-05-18 15:22:23.881 +03:00] [INF] [] [0HNCLU5SMUD3M:00000002] [/api/v1/mpesa/payments/initiate] [Executing endpoint 'DarajaAPI.Controllers.v1.MpesaPaymentController.InitiatePayment (DarajaAPI)'] []
[2025-05-18 15:22:23.884 +03:00] [INF] [] [0HNCLU5SMUD3M:00000002] [/api/v1/mpesa/payments/initiate] [Route matched with {action = "InitiatePayment", controller = "MpesaPayment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] InitiatePayment(DarajaAPI.Models.Dto.PaymentRequestDto) on controller DarajaAPI.Controllers.v1.MpesaPaymentController (DarajaAPI).] []
[2025-05-18 15:22:32.414 +03:00] [INF] [] [0HNCLU5SMUD3M:00000002] [/api/v1/mpesa/payments/initiate] [Start processing HTTP request GET https://sandbox.safaricom.co.ke/oauth/v1/generate?grant_type=client_credentials] []
[2025-05-18 15:22:32.417 +03:00] [INF] [] [0HNCLU5SMUD3M:00000002] [/api/v1/mpesa/payments/initiate] [Sending HTTP request GET https://sandbox.safaricom.co.ke/oauth/v1/generate?grant_type=client_credentials] []
[2025-05-18 15:22:32.928 +03:00] [INF] [] [0HNCLU5SMUD3M:00000002] [/api/v1/mpesa/payments/initiate] [Received HTTP response headers after 509.7541ms - 200] []
[2025-05-18 15:22:32.932 +03:00] [INF] [] [0HNCLU5SMUD3M:00000002] [/api/v1/mpesa/payments/initiate] [End processing HTTP request after 518.1025ms - 200] []
[2025-05-18 15:24:47.437 +03:00] [INF] [] [0HNCLU5SMUD3M:00000002] [/api/v1/mpesa/payments/initiate] [Start processing HTTP request POST https://sandbox.safaricom.co.ke/mpesa/stkpush/v1/processrequest] []
[2025-05-18 15:24:47.458 +03:00] [INF] [] [0HNCLU5SMUD3M:00000002] [/api/v1/mpesa/payments/initiate] [Sending HTTP request POST https://sandbox.safaricom.co.ke/mpesa/stkpush/v1/processrequest] []
[2025-05-18 15:24:48.316 +03:00] [INF] [] [0HNCLU5SMUD3M:00000002] [/api/v1/mpesa/payments/initiate] [Received HTTP response headers after 848.3901ms - 400] []
[2025-05-18 15:24:48.325 +03:00] [INF] [] [0HNCLU5SMUD3M:00000002] [/api/v1/mpesa/payments/initiate] [End processing HTTP request after 887.4998ms - 400] []
[2025-05-18 15:24:48.333 +03:00] [INF] [] [0HNCLU5SMUD3M:00000002] [/api/v1/mpesa/payments/initiate] [Payment processed: 254708374149, 10] []
[2025-05-18 15:24:48.341 +03:00] [INF] [] [0HNCLU5SMUD3M:00000002] [/api/v1/mpesa/payments/initiate] [Executing OkObjectResult, writing value of type 'System.String'.] []
[2025-05-18 15:24:48.347 +03:00] [INF] [] [0HNCLU5SMUD3M:00000002] [/api/v1/mpesa/payments/initiate] [Executed action DarajaAPI.Controllers.v1.MpesaPaymentController.InitiatePayment (DarajaAPI) in 144459.5528ms] []
[2025-05-18 15:24:48.350 +03:00] [INF] [] [0HNCLU5SMUD3M:00000002] [/api/v1/mpesa/payments/initiate] [Executed endpoint 'DarajaAPI.Controllers.v1.MpesaPaymentController.InitiatePayment (DarajaAPI)'] []
[2025-05-18 15:24:48.351 +03:00] [INF] [] [0HNCLU5SMUD3M:00000002] [/api/v1/mpesa/payments/initiate] [Request finished HTTP/1.1 POST https://a86e-41-81-46-57.ngrok-free.app/api/v1/mpesa/payments/initiate - 200 null text/plain; charset=utf-8 144476.0598ms] []
[2025-05-18 15:24:59.154 +03:00] [INF] [] [0HNCLU5SMUD3M:00000003] [/api/v1/mpesa/payments/initiate] [Request starting HTTP/1.1 POST https://a86e-41-81-46-57.ngrok-free.app/api/v1/mpesa/payments/initiate - application/json 83] []
[2025-05-18 15:24:59.160 +03:00] [INF] [] [0HNCLU5SMUD3M:00000003] [/api/v1/mpesa/payments/initiate] [CORS policy execution successful.] []
[2025-05-18 15:24:59.161 +03:00] [INF] [] [0HNCLU5SMUD3M:00000003] [/api/v1/mpesa/payments/initiate] [Executing endpoint 'DarajaAPI.Controllers.v1.MpesaPaymentController.InitiatePayment (DarajaAPI)'] []
[2025-05-18 15:24:59.162 +03:00] [INF] [] [0HNCLU5SMUD3M:00000003] [/api/v1/mpesa/payments/initiate] [Route matched with {action = "InitiatePayment", controller = "MpesaPayment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] InitiatePayment(DarajaAPI.Models.Dto.PaymentRequestDto) on controller DarajaAPI.Controllers.v1.MpesaPaymentController (DarajaAPI).] []
[2025-05-18 15:25:06.114 +03:00] [INF] [] [0HNCLU5SMUD3M:00000003] [/api/v1/mpesa/payments/initiate] [Start processing HTTP request GET https://sandbox.safaricom.co.ke/oauth/v1/generate?grant_type=client_credentials] []
[2025-05-18 15:25:06.119 +03:00] [INF] [] [0HNCLU5SMUD3M:00000003] [/api/v1/mpesa/payments/initiate] [Sending HTTP request GET https://sandbox.safaricom.co.ke/oauth/v1/generate?grant_type=client_credentials] []
[2025-05-18 15:25:07.019 +03:00] [INF] [] [0HNCLU5SMUD3M:00000003] [/api/v1/mpesa/payments/initiate] [Received HTTP response headers after 897.6727ms - 200] []
[2025-05-18 15:25:07.022 +03:00] [INF] [] [0HNCLU5SMUD3M:00000003] [/api/v1/mpesa/payments/initiate] [End processing HTTP request after 907.7981ms - 200] []
[2025-05-18 15:28:02.423 +03:00] [INF] [] [0HNCLU5SMUD3M:00000003] [/api/v1/mpesa/payments/initiate] [Start processing HTTP request POST https://sandbox.safaricom.co.ke/mpesa/stkpush/v1/processrequest] []
[2025-05-18 15:28:02.463 +03:00] [INF] [] [0HNCLU5SMUD3M:00000003] [/api/v1/mpesa/payments/initiate] [Sending HTTP request POST https://sandbox.safaricom.co.ke/mpesa/stkpush/v1/processrequest] []
[2025-05-18 15:28:03.393 +03:00] [INF] [] [0HNCLU5SMUD3M:00000003] [/api/v1/mpesa/payments/initiate] [Received HTTP response headers after 913.4291ms - 400] []
[2025-05-18 15:28:03.398 +03:00] [INF] [] [0HNCLU5SMUD3M:00000003] [/api/v1/mpesa/payments/initiate] [End processing HTTP request after 975.2542ms - 400] []
[2025-05-18 15:28:03.403 +03:00] [INF] [] [0HNCLU5SMUD3M:00000003] [/api/v1/mpesa/payments/initiate] [Payment processed: 254708374149, 10] []
[2025-05-18 15:28:03.406 +03:00] [INF] [] [0HNCLU5SMUD3M:00000003] [/api/v1/mpesa/payments/initiate] [Executing OkObjectResult, writing value of type 'System.String'.] []
[2025-05-18 15:28:03.409 +03:00] [INF] [] [0HNCLU5SMUD3M:00000003] [/api/v1/mpesa/payments/initiate] [Executed action DarajaAPI.Controllers.v1.MpesaPaymentController.InitiatePayment (DarajaAPI) in 184244.5759ms] []
[2025-05-18 15:28:03.415 +03:00] [INF] [] [0HNCLU5SMUD3M:00000003] [/api/v1/mpesa/payments/initiate] [Executed endpoint 'DarajaAPI.Controllers.v1.MpesaPaymentController.InitiatePayment (DarajaAPI)'] []
[2025-05-18 15:28:03.419 +03:00] [INF] [] [0HNCLU5SMUD3M:00000003] [/api/v1/mpesa/payments/initiate] [Request finished HTTP/1.1 POST https://a86e-41-81-46-57.ngrok-free.app/api/v1/mpesa/payments/initiate - 200 null text/plain; charset=utf-8 184264.5671ms] []
[2025-05-18 15:28:03.725 +03:00] [INF] [] [0HNCLU5SMUD3M:00000004] [/swagger/index.html] [Request starting HTTP/1.1 GET https://a86e-41-81-46-57.ngrok-free.app/swagger/index.html - null null] []
[2025-05-18 15:28:03.748 +03:00] [INF] [] [0HNCLU5SMUD3M:00000004] [/swagger/index.html] [Request finished HTTP/1.1 GET https://a86e-41-81-46-57.ngrok-free.app/swagger/index.html - 200 null text/html;charset=utf-8 22.8431ms] []
[2025-05-18 15:28:04.566 +03:00] [INF] [] [0HNCLU5SMUD3M:00000005] [/_vs/browserLink] [Request starting HTTP/1.1 GET https://a86e-41-81-46-57.ngrok-free.app/_vs/browserLink - null null] []
[2025-05-18 15:28:04.579 +03:00] [INF] [] [0HNCLU5SMUD3M:00000005] [/_vs/browserLink] [Request finished HTTP/1.1 GET https://a86e-41-81-46-57.ngrok-free.app/_vs/browserLink - 200 null text/javascript; charset=UTF-8 13.2224ms] []
[2025-05-18 15:28:04.581 +03:00] [INF] [] [0HNCLU5SMUD3N:00000001] [/_framework/aspnetcore-browser-refresh.js] [Request starting HTTP/1.1 GET https://a86e-41-81-46-57.ngrok-free.app/_framework/aspnetcore-browser-refresh.js - null null] []
[2025-05-18 15:28:04.589 +03:00] [INF] [] [0HNCLU5SMUD3N:00000001] [/_framework/aspnetcore-browser-refresh.js] [Request finished HTTP/1.1 GET https://a86e-41-81-46-57.ngrok-free.app/_framework/aspnetcore-browser-refresh.js - 200 16503 application/javascript; charset=utf-8 7.6404ms] []
[2025-05-18 15:28:47.137 +03:00] [INF] [] [] [] [Starting role seeding] []
[2025-05-18 15:28:48.278 +03:00] [INF] [] [] [] [Executed DbCommand (42ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `r`.`Id`, `r`.`ConcurrencyStamp`, `r`.`Name`, `r`.`NormalizedName`
FROM `Role` AS `r`
WHERE `r`.`NormalizedName` = @__normalizedName_0
LIMIT 1] []
[2025-05-18 15:28:48.384 +03:00] [INF] [] [] [] [Executed DbCommand (7ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `r`.`Id`, `r`.`ConcurrencyStamp`, `r`.`Name`, `r`.`NormalizedName`
FROM `Role` AS `r`
WHERE `r`.`NormalizedName` = @__normalizedName_0
LIMIT 1] []
[2025-05-18 15:28:48.393 +03:00] [INF] [] [] [] [Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `r`.`Id`, `r`.`ConcurrencyStamp`, `r`.`Name`, `r`.`NormalizedName`
FROM `Role` AS `r`
WHERE `r`.`NormalizedName` = @__normalizedName_0
LIMIT 1] []
[2025-05-18 15:28:48.401 +03:00] [INF] [] [] [] [Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `r`.`Id`, `r`.`ConcurrencyStamp`, `r`.`Name`, `r`.`NormalizedName`
FROM `Role` AS `r`
WHERE `r`.`NormalizedName` = @__normalizedName_0
LIMIT 1] []
[2025-05-18 15:28:48.404 +03:00] [INF] [] [] [] [Role seeding completed] []
[2025-05-18 15:28:48.404 +03:00] [INF] [] [] [] [Starting super admin seeding] []
[2025-05-18 15:28:48.427 +03:00] [INF] [] [] [] [Executed DbCommand (4ms) [Parameters=[@__defaultUser_Email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT NOT EXISTS (
    SELECT 1
    FROM `User` AS `u`
    WHERE (`u`.`Email` = @__defaultUser_Email_0) AND `u`.`Email` IS NOT NULL)] []
[2025-05-18 15:28:48.434 +03:00] [INF] [] [] [] [Super admin seeding completed] []
[2025-05-18 15:29:04.071 +03:00] [INF] [] [] [] [Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `m`.`Id`, `m`.`BillRefNumber`, `m`.`BusinessShortCode`, `m`.`CreatedAt`, `m`.`FirstName`, `m`.`InvoiceNumber`, `m`.`IsVerified`, `m`.`LastName`, `m`.`MSISDN`, `m`.`MiddleName`, `m`.`OrgAccountBalance`, `m`.`RetryCount`, `m`.`ThirdPartyTransID`, `m`.`TransAmount`, `m`.`TransID`, `m`.`TransTime`, `m`.`TransactionType`, `m`.`VerificationDate`, `m`.`VerificationResult`
FROM `MpesaC2Bs` AS `m`
WHERE NOT (`m`.`IsVerified`) AND (`m`.`CreatedAt` > DATE_ADD(UTC_TIMESTAMP(), INTERVAL CAST(-7.0 AS signed) day))] []
[2025-05-18 15:29:04.157 +03:00] [WRN] [] [] [] [The WebRootPath was not found: C:\Users\ianga\source\repos\DarajaIntegration\DarajaAPI\wwwroot. Static files may be unavailable.] []
[2025-05-18 15:29:04.229 +03:00] [INF] [] [] [] [Now listening on: https://localhost:5003] []
[2025-05-18 15:29:04.312 +03:00] [INF] [] [] [] [Application started. Press Ctrl+C to shut down.] []
[2025-05-18 15:29:04.316 +03:00] [INF] [] [] [] [Hosting environment: Development] []
[2025-05-18 15:29:04.318 +03:00] [INF] [] [] [] [Content root path: C:\Users\ianga\source\repos\DarajaIntegration\DarajaAPI] []
[2025-05-18 15:29:04.815 +03:00] [INF] [] [0HNCM0U9QDF7T:00000001] [/swagger/index.html] [Request starting HTTP/2 GET https://localhost:5003/swagger/index.html - null null] []
[2025-05-18 15:29:05.082 +03:00] [INF] [] [0HNCM0U9QDF7T:00000001] [/swagger/index.html] [Request finished HTTP/2 GET https://localhost:5003/swagger/index.html - 200 null text/html;charset=utf-8 281.7603ms] []
[2025-05-18 15:29:05.091 +03:00] [INF] [] [0HNCM0U9QDF7T:00000003] [/_framework/aspnetcore-browser-refresh.js] [Request starting HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - null null] []
[2025-05-18 15:29:05.091 +03:00] [INF] [] [0HNCM0U9QDF7T:00000005] [/_vs/browserLink] [Request starting HTTP/2 GET https://localhost:5003/_vs/browserLink - null null] []
[2025-05-18 15:29:05.110 +03:00] [INF] [] [0HNCM0U9QDF7T:00000003] [/_framework/aspnetcore-browser-refresh.js] [Request finished HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - 200 16503 application/javascript; charset=utf-8 20.6646ms] []
[2025-05-18 15:29:05.200 +03:00] [INF] [] [0HNCM0U9QDF7T:00000005] [/_vs/browserLink] [Request finished HTTP/2 GET https://localhost:5003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 109.4388ms] []
[2025-05-18 15:29:05.235 +03:00] [INF] [] [0HNCM0U9QDF7T:00000007] [/swagger/v1/swagger.json] [Request starting HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - null null] []
[2025-05-18 15:29:05.252 +03:00] [INF] [] [0HNCM0U9QDF7T:00000007] [/swagger/v1/swagger.json] [Request finished HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 17.689ms] []
