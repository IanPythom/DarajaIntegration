[2025-05-18 21:05:35.933 +03:00] [INF] [] [0HNCM6C49GA5I:00000001] [/api/v1/mpesa/payments/initiate] [Request starting HTTP/1.1 POST https://a86e-41-81-46-57.ngrok-free.app/api/v1/mpesa/payments/initiate - application/json 82] []
[2025-05-18 21:05:35.969 +03:00] [INF] [] [0HNCM6C49GA5I:00000001] [/api/v1/mpesa/payments/initiate] [CORS policy execution successful.] []
[2025-05-18 21:05:35.976 +03:00] [INF] [] [0HNCM6C49GA5I:00000001] [/api/v1/mpesa/payments/initiate] [Executing endpoint 'DarajaAPI.Controllers.v1.MpesaPaymentController.InitiatePayment (DarajaAPI)'] []
[2025-05-18 21:05:35.979 +03:00] [INF] [] [0HNCM6C49GA5I:00000001] [/api/v1/mpesa/payments/initiate] [Route matched with {action = "InitiatePayment", controller = "MpesaPayment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] InitiatePayment(DarajaAPI.Models.Dto.PaymentRequestDto) on controller DarajaAPI.Controllers.v1.MpesaPaymentController (DarajaAPI).] []
[2025-05-18 21:05:45.612 +03:00] [INF] [] [0HNCM6C49GA5I:00000001] [/api/v1/mpesa/payments/initiate] [Start processing HTTP request GET https://sandbox.safaricom.co.ke/oauth/v1/generate?grant_type=client_credentials] []
[2025-05-18 21:05:45.628 +03:00] [INF] [] [0HNCM6C49GA5I:00000001] [/api/v1/mpesa/payments/initiate] [Sending HTTP request GET https://sandbox.safaricom.co.ke/oauth/v1/generate?grant_type=client_credentials] []
[2025-05-18 21:05:46.670 +03:00] [INF] [] [0HNCM6C49GA5I:00000001] [/api/v1/mpesa/payments/initiate] [Received HTTP response headers after 1031.2758ms - 200] []
[2025-05-18 21:05:46.674 +03:00] [INF] [] [0HNCM6C49GA5I:00000001] [/api/v1/mpesa/payments/initiate] [End processing HTTP request after 1062.1652ms - 200] []
[2025-05-18 21:05:58.505 +03:00] [INF] [] [0HNCM6C49GA5I:00000001] [/api/v1/mpesa/payments/initiate] [Start processing HTTP request POST https://sandbox.safaricom.co.ke/mpesa/stkpush/v1/processrequest] []
[2025-05-18 21:05:58.509 +03:00] [INF] [] [0HNCM6C49GA5I:00000001] [/api/v1/mpesa/payments/initiate] [Sending HTTP request POST https://sandbox.safaricom.co.ke/mpesa/stkpush/v1/processrequest] []
[2025-05-18 21:05:58.764 +03:00] [INF] [] [0HNCM6C49GA5I:00000001] [/api/v1/mpesa/payments/initiate] [Received HTTP response headers after 251.8937ms - 400] []
[2025-05-18 21:05:58.776 +03:00] [INF] [] [0HNCM6C49GA5I:00000001] [/api/v1/mpesa/payments/initiate] [End processing HTTP request after 270.9792ms - 400] []
[2025-05-18 21:05:59.935 +03:00] [INF] [] [0HNCM6C49GA5I:00000001] [/api/v1/mpesa/payments/initiate] [Payment processed: 254708374149, 1] []
[2025-05-18 21:06:03.342 +03:00] [INF] [] [0HNCM6C49GA5I:00000001] [/api/v1/mpesa/payments/initiate] [Executing OkObjectResult, writing value of type 'System.String'.] []
[2025-05-18 21:06:03.355 +03:00] [INF] [] [0HNCM6C49GA5I:00000001] [/api/v1/mpesa/payments/initiate] [Executed action DarajaAPI.Controllers.v1.MpesaPaymentController.InitiatePayment (DarajaAPI) in 27369.8114ms] []
[2025-05-18 21:06:03.367 +03:00] [INF] [] [0HNCM6C49GA5I:00000001] [/api/v1/mpesa/payments/initiate] [Executed endpoint 'DarajaAPI.Controllers.v1.MpesaPaymentController.InitiatePayment (DarajaAPI)'] []
[2025-05-18 21:06:03.374 +03:00] [INF] [] [0HNCM6C49GA5I:00000001] [/api/v1/mpesa/payments/initiate] [Request finished HTTP/1.1 POST https://a86e-41-81-46-57.ngrok-free.app/api/v1/mpesa/payments/initiate - 200 null text/plain; charset=utf-8 27441.8978ms] []
[2025-05-18 21:09:09.813 +03:00] [INF] [] [] [] [Starting role seeding] []
[2025-05-18 21:09:12.665 +03:00] [INF] [] [] [] [Executed DbCommand (91ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `r`.`Id`, `r`.`ConcurrencyStamp`, `r`.`Name`, `r`.`NormalizedName`
FROM `Role` AS `r`
WHERE `r`.`NormalizedName` = @__normalizedName_0
LIMIT 1] []
[2025-05-18 21:09:12.905 +03:00] [INF] [] [] [] [Executed DbCommand (18ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `r`.`Id`, `r`.`ConcurrencyStamp`, `r`.`Name`, `r`.`NormalizedName`
FROM `Role` AS `r`
WHERE `r`.`NormalizedName` = @__normalizedName_0
LIMIT 1] []
[2025-05-18 21:09:12.919 +03:00] [INF] [] [] [] [Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `r`.`Id`, `r`.`ConcurrencyStamp`, `r`.`Name`, `r`.`NormalizedName`
FROM `Role` AS `r`
WHERE `r`.`NormalizedName` = @__normalizedName_0
LIMIT 1] []
[2025-05-18 21:09:12.931 +03:00] [INF] [] [] [] [Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT `r`.`Id`, `r`.`ConcurrencyStamp`, `r`.`Name`, `r`.`NormalizedName`
FROM `Role` AS `r`
WHERE `r`.`NormalizedName` = @__normalizedName_0
LIMIT 1] []
[2025-05-18 21:09:12.936 +03:00] [INF] [] [] [] [Role seeding completed] []
[2025-05-18 21:09:12.938 +03:00] [INF] [] [] [] [Starting super admin seeding] []
[2025-05-18 21:09:12.986 +03:00] [INF] [] [] [] [Executed DbCommand (3ms) [Parameters=[@__defaultUser_Email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT NOT EXISTS (
    SELECT 1
    FROM `User` AS `u`
    WHERE (`u`.`Email` = @__defaultUser_Email_0) AND `u`.`Email` IS NOT NULL)] []
[2025-05-18 21:09:12.999 +03:00] [INF] [] [] [] [Super admin seeding completed] []
[2025-05-18 21:09:57.097 +03:00] [INF] [] [] [] [Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `m`.`Id`, `m`.`BillRefNumber`, `m`.`BusinessShortCode`, `m`.`CreatedAt`, `m`.`FirstName`, `m`.`InvoiceNumber`, `m`.`IsVerified`, `m`.`LastName`, `m`.`MSISDN`, `m`.`MiddleName`, `m`.`OrgAccountBalance`, `m`.`RetryCount`, `m`.`ThirdPartyTransID`, `m`.`TransAmount`, `m`.`TransID`, `m`.`TransTime`, `m`.`TransactionType`, `m`.`VerificationDate`, `m`.`VerificationResult`
FROM `MpesaC2Bs` AS `m`
WHERE NOT (`m`.`IsVerified`) AND (`m`.`CreatedAt` > DATE_ADD(UTC_TIMESTAMP(), INTERVAL CAST(-7.0 AS signed) day))] []
[2025-05-18 21:09:57.347 +03:00] [WRN] [] [] [] [The WebRootPath was not found: C:\Users\ianga\source\repos\DarajaIntegration\DarajaAPI\wwwroot. Static files may be unavailable.] []
[2025-05-18 21:09:57.612 +03:00] [INF] [] [] [] [Now listening on: https://localhost:5003] []
[2025-05-18 21:09:57.955 +03:00] [INF] [] [] [] [Application started. Press Ctrl+C to shut down.] []
[2025-05-18 21:09:57.958 +03:00] [INF] [] [] [] [Hosting environment: Development] []
[2025-05-18 21:09:57.961 +03:00] [INF] [] [] [] [Content root path: C:\Users\ianga\source\repos\DarajaIntegration\DarajaAPI] []
[2025-05-18 21:09:59.397 +03:00] [INF] [] [0HNCM6SPGPTKA:00000001] [/swagger/index.html] [Request starting HTTP/2 GET https://localhost:5003/swagger/index.html - null null] []
[2025-05-18 21:10:00.198 +03:00] [INF] [] [0HNCM6SPGPTKA:00000001] [/swagger/index.html] [Request finished HTTP/2 GET https://localhost:5003/swagger/index.html - 200 null text/html;charset=utf-8 820.2835ms] []
[2025-05-18 21:10:00.199 +03:00] [INF] [] [0HNCM6SPGPTKA:00000003] [/_framework/aspnetcore-browser-refresh.js] [Request starting HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - null null] []
[2025-05-18 21:10:00.205 +03:00] [INF] [] [0HNCM6SPGPTKA:00000005] [/_vs/browserLink] [Request starting HTTP/2 GET https://localhost:5003/_vs/browserLink - null null] []
[2025-05-18 21:10:00.259 +03:00] [INF] [] [0HNCM6SPGPTKA:00000003] [/_framework/aspnetcore-browser-refresh.js] [Request finished HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - 200 16503 application/javascript; charset=utf-8 61.222ms] []
[2025-05-18 21:10:00.404 +03:00] [INF] [] [0HNCM6SPGPTKA:00000005] [/_vs/browserLink] [Request finished HTTP/2 GET https://localhost:5003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 198.8265ms] []
[2025-05-18 21:10:00.524 +03:00] [INF] [] [0HNCM6SPGPTKA:00000007] [/swagger/v1/swagger.json] [Request starting HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - null null] []
[2025-05-18 21:10:00.588 +03:00] [INF] [] [0HNCM6SPGPTKA:00000007] [/swagger/v1/swagger.json] [Request finished HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 64.9559ms] []
[2025-05-18 21:24:57.445 +03:00] [INF] [] [] [] [Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `m`.`Id`, `m`.`BillRefNumber`, `m`.`BusinessShortCode`, `m`.`CreatedAt`, `m`.`FirstName`, `m`.`InvoiceNumber`, `m`.`IsVerified`, `m`.`LastName`, `m`.`MSISDN`, `m`.`MiddleName`, `m`.`OrgAccountBalance`, `m`.`RetryCount`, `m`.`ThirdPartyTransID`, `m`.`TransAmount`, `m`.`TransID`, `m`.`TransTime`, `m`.`TransactionType`, `m`.`VerificationDate`, `m`.`VerificationResult`
FROM `MpesaC2Bs` AS `m`
WHERE NOT (`m`.`IsVerified`) AND (`m`.`CreatedAt` > DATE_ADD(UTC_TIMESTAMP(), INTERVAL CAST(-7.0 AS signed) day))] []
[2025-05-18 21:33:05.188 +03:00] [INF] [] [0HNCM6SPGPTKB:00000001] [/api/v1/mpesa/payments/initiate] [Request starting HTTP/1.1 POST https://a86e-41-81-46-57.ngrok-free.app/api/v1/mpesa/payments/initiate - application/json 82] []
[2025-05-18 21:33:05.403 +03:00] [INF] [] [0HNCM6SPGPTKB:00000001] [/api/v1/mpesa/payments/initiate] [CORS policy execution successful.] []
[2025-05-18 21:33:05.454 +03:00] [INF] [] [0HNCM6SPGPTKB:00000001] [/api/v1/mpesa/payments/initiate] [Executing endpoint 'DarajaAPI.Controllers.v1.MpesaPaymentController.InitiatePayment (DarajaAPI)'] []
[2025-05-18 21:33:05.517 +03:00] [INF] [] [0HNCM6SPGPTKB:00000001] [/api/v1/mpesa/payments/initiate] [Route matched with {action = "InitiatePayment", controller = "MpesaPayment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] InitiatePayment(DarajaAPI.Models.Dto.PaymentRequestDto) on controller DarajaAPI.Controllers.v1.MpesaPaymentController (DarajaAPI).] []
[2025-05-18 21:33:16.923 +03:00] [INF] [] [0HNCM6SPGPTKB:00000001] [/api/v1/mpesa/payments/initiate] [Start processing HTTP request GET https://sandbox.safaricom.co.ke/oauth/v1/generate?grant_type=client_credentials] []
[2025-05-18 21:33:16.932 +03:00] [INF] [] [0HNCM6SPGPTKB:00000001] [/api/v1/mpesa/payments/initiate] [Sending HTTP request GET https://sandbox.safaricom.co.ke/oauth/v1/generate?grant_type=client_credentials] []
[2025-05-18 21:33:17.927 +03:00] [INF] [] [0HNCM6SPGPTKB:00000001] [/api/v1/mpesa/payments/initiate] [Received HTTP response headers after 983.8508ms - 200] []
[2025-05-18 21:33:17.956 +03:00] [INF] [] [0HNCM6SPGPTKB:00000001] [/api/v1/mpesa/payments/initiate] [End processing HTTP request after 1037.2223ms - 200] []
[2025-05-18 21:33:23.991 +03:00] [INF] [] [0HNCM6SPGPTKB:00000001] [/api/v1/mpesa/payments/initiate] [Start processing HTTP request POST https://sandbox.safaricom.co.ke/mpesa/stkpush/v1/processrequest] []
[2025-05-18 21:33:23.999 +03:00] [INF] [] [0HNCM6SPGPTKB:00000001] [/api/v1/mpesa/payments/initiate] [Sending HTTP request POST https://sandbox.safaricom.co.ke/mpesa/stkpush/v1/processrequest] []
[2025-05-18 21:33:24.424 +03:00] [INF] [] [0HNCM6SPGPTKB:00000001] [/api/v1/mpesa/payments/initiate] [Received HTTP response headers after 415.4655ms - 400] []
[2025-05-18 21:33:24.433 +03:00] [INF] [] [0HNCM6SPGPTKB:00000001] [/api/v1/mpesa/payments/initiate] [End processing HTTP request after 442.7587ms - 400] []
[2025-05-18 21:33:24.816 +03:00] [INF] [] [0HNCM6SPGPTKB:00000001] [/api/v1/mpesa/payments/initiate] [Payment processed: 254708374149, 1] []
[2025-05-18 21:33:29.691 +03:00] [INF] [] [0HNCM6SPGPTKB:00000001] [/api/v1/mpesa/payments/initiate] [Executing OkObjectResult, writing value of type 'System.String'.] []
[2025-05-18 21:33:29.735 +03:00] [INF] [] [0HNCM6SPGPTKB:00000001] [/api/v1/mpesa/payments/initiate] [Executed action DarajaAPI.Controllers.v1.MpesaPaymentController.InitiatePayment (DarajaAPI) in 24198.0716ms] []
[2025-05-18 21:33:29.749 +03:00] [INF] [] [0HNCM6SPGPTKB:00000001] [/api/v1/mpesa/payments/initiate] [Executed endpoint 'DarajaAPI.Controllers.v1.MpesaPaymentController.InitiatePayment (DarajaAPI)'] []
[2025-05-18 21:33:29.763 +03:00] [INF] [] [0HNCM6SPGPTKB:00000001] [/api/v1/mpesa/payments/initiate] [Request finished HTTP/1.1 POST https://a86e-41-81-46-57.ngrok-free.app/api/v1/mpesa/payments/initiate - 200 null text/plain; charset=utf-8 24576.0772ms] []
[2025-05-18 21:40:04.218 +03:00] [INF] [] [] [] [Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `m`.`Id`, `m`.`BillRefNumber`, `m`.`BusinessShortCode`, `m`.`CreatedAt`, `m`.`FirstName`, `m`.`InvoiceNumber`, `m`.`IsVerified`, `m`.`LastName`, `m`.`MSISDN`, `m`.`MiddleName`, `m`.`OrgAccountBalance`, `m`.`RetryCount`, `m`.`ThirdPartyTransID`, `m`.`TransAmount`, `m`.`TransID`, `m`.`TransTime`, `m`.`TransactionType`, `m`.`VerificationDate`, `m`.`VerificationResult`
FROM `MpesaC2Bs` AS `m`
WHERE NOT (`m`.`IsVerified`) AND (`m`.`CreatedAt` > DATE_ADD(UTC_TIMESTAMP(), INTERVAL CAST(-7.0 AS signed) day))] []
[2025-05-18 21:40:05.069 +03:00] [INF] [] [0HNCM6SPGPTKA:00000009] [/swagger/index.html] [Request starting HTTP/2 GET https://localhost:5003/swagger/index.html - null null] []
[2025-05-18 21:40:05.097 +03:00] [INF] [] [0HNCM6SPGPTKA:00000009] [/swagger/index.html] [Request finished HTTP/2 GET https://localhost:5003/swagger/index.html - 200 null text/html;charset=utf-8 28.3781ms] []
[2025-05-18 21:40:05.125 +03:00] [INF] [] [0HNCM6SPGPTKA:0000000B] [/_framework/aspnetcore-browser-refresh.js] [Request starting HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - null null] []
[2025-05-18 21:40:05.125 +03:00] [INF] [] [0HNCM6SPGPTKA:0000000D] [/_vs/browserLink] [Request starting HTTP/2 GET https://localhost:5003/_vs/browserLink - null null] []
[2025-05-18 21:40:05.136 +03:00] [INF] [] [0HNCM6SPGPTKA:0000000B] [/_framework/aspnetcore-browser-refresh.js] [Request finished HTTP/2 GET https://localhost:5003/_framework/aspnetcore-browser-refresh.js - 200 16503 application/javascript; charset=utf-8 11.1985ms] []
[2025-05-18 21:40:05.209 +03:00] [INF] [] [0HNCM6SPGPTKA:0000000D] [/_vs/browserLink] [Request finished HTTP/2 GET https://localhost:5003/_vs/browserLink - 200 null text/javascript; charset=UTF-8 84.7002ms] []
[2025-05-18 21:40:05.353 +03:00] [INF] [] [0HNCM6SPGPTKA:0000000F] [/swagger/v1/swagger.json] [Request starting HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - null null] []
[2025-05-18 21:40:05.411 +03:00] [INF] [] [0HNCM6SPGPTKA:0000000F] [/swagger/v1/swagger.json] [Request finished HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 58.4651ms] []
[2025-05-18 21:55:04.465 +03:00] [INF] [] [] [] [Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `m`.`Id`, `m`.`BillRefNumber`, `m`.`BusinessShortCode`, `m`.`CreatedAt`, `m`.`FirstName`, `m`.`InvoiceNumber`, `m`.`IsVerified`, `m`.`LastName`, `m`.`MSISDN`, `m`.`MiddleName`, `m`.`OrgAccountBalance`, `m`.`RetryCount`, `m`.`ThirdPartyTransID`, `m`.`TransAmount`, `m`.`TransID`, `m`.`TransTime`, `m`.`TransactionType`, `m`.`VerificationDate`, `m`.`VerificationResult`
FROM `MpesaC2Bs` AS `m`
WHERE NOT (`m`.`IsVerified`) AND (`m`.`CreatedAt` > DATE_ADD(UTC_TIMESTAMP(), INTERVAL CAST(-7.0 AS signed) day))] []
